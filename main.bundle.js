!function(t){var e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(r,s,function(e){return t[e]}.bind(null,s));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var r=i.p+"images//platform.png",s=i.p+"images//hills.png",n=i.p+"images//background.png",o=i.p+"images//platformSmallTall.png",h=i.p+"images//spriteRunLeft.png",p=i.p+"images//spriteRunRight.png",a=i.p+"images//spriteStandLeft.png",c=i.p+"images//spriteStandRight.png";function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,i){return e&&d(t.prototype,e),i&&d(t,i),t}
//! Импорт спрайта
console.log(r);var f=document.querySelector("canvas"),g=f.getContext("2d");f.width=1024,f.height=576;var y=function(){function t(){u(this,t),this.speed=10,this.position={x:100,y:100},this.velocity={x:0,y:0},this.width=66,this.height=150,this.image=x(c),this.frames=0,this.sprites={stand:{right:x(c),left:x(a),cropWidth:177,width:66},run:{right:x(p),left:x(h),cropWidth:341,width:127.875}},this.currentSprite=this.sprites.stand.right,this.currnetCropWidth=177}return l(t,[{key:"draw",value:function(){g.drawImage(this.currentSprite,this.currnetCropWidth*this.frames,0,this.currnetCropWidth,400,this.position.x,this.position.y,this.width,this.height)}},{key:"update",value:function(){this.frames++,(this.frames>59&&(this.currentSprite===this.sprites.stand.right||this.currnetSprite===this.sprites.stand.left)||this.frames>29&&(this.currentSprite===this.sprites.run.right||this.currentSprite===this.sprites.run.left))&&(this.frames=0),this.draw(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.position.y+this.height+this.velocity.y<=f.height&&(this.velocity.y+=.5)}}]),t}(),w=function(){function t(e){var i=e.x,r=e.y,s=e.image;u(this,t),this.position={x:i,y:r},this.image=s,this.width=s.width,this.height=s.height}return l(t,[{key:"draw",value:function(){g.fillStyle="blue",g.drawImage(this.image,this.position.x,this.position.y)}}]),t}(),m=function(){function t(e){var i=e.x,r=e.y,s=e.image;u(this,t),this.position={x:i,y:r},this.image=s,this.width=s.width,this.height=s.height}return l(t,[{key:"draw",value:function(){g.fillStyle="blue",g.drawImage(this.image,this.position.x,this.position.y)}}]),t}();//! Создаём класс игрока
//! Создание бэкграунда
function x(t){var e=new Image;return e.src=t,e}//! Создаём функцию для рестарта игры
var v,b=x(r),S=x(o),k=new y,W=[],C=[],E={right:{pressed:!1},left:{pressed:!1}},j=0;function O(){b=x(r),k=new y,W=[new w({x:4*b.width+300-2+b.width-S.width,y:270,image:x(o)}),new w({x:-1,y:470,image:b}),new w({x:b.width-3,y:470,image:b}),new w({x:2*b.width+100,y:470,image:b}),new w({x:3*b.width+300,y:470,image:b}),new w({x:4*b.width+300-2,y:470,image:b}),new w({x:5*b.width+700-2,y:470,image:b})],C=[new m({x:-1,y:-1,image:x(n)}),new m({x:-1,y:-1,image:x(s)})],j=0}O(),function t(){requestAnimationFrame(t),g.fillStyle="white",g.fillRect(0,0,f.width,f.height),C.forEach((function(t){t.draw()})),W.forEach((function(t){t.draw()})),k.update(),E.right.pressed&&k.position.x<400?k.velocity.x=k.speed:E.left.pressed&&k.position.x>100||E.left.pressed&&0===j&&k.position.x>0?k.velocity.x=-k.speed:(k.velocity.x=0,E.right.pressed?(j+=k.speed,W.forEach((function(t){t.position.x-=k.speed})),C.forEach((function(t){t.position.x-=.66*k.speed}))):E.left.pressed&&j>0&&(j-=k.speed,W.forEach((function(t){t.position.x+=k.speed})),C.forEach((function(t){t.position.x+=.66*k.speed})))),//! platform collision detection
W.forEach((function(t){k.position.y+k.height<=t.position.y&&k.position.y+k.height+k.velocity.y>=t.position.y&&k.position.x+k.width>=t.position.x&&k.position.x<=t.position.x+t.width&&(k.velocity.y=0)})),//! Sprite switching
E.right.pressed&&"right"===v&&k.currentSprite!==k.sprites.run.right?(k.frames=1,k.currentSprite=k.sprites.run.right,k.currnetCropWidth=k.sprites.run.cropWidth,k.width=k.sprites.run.width):E.left.pressed&&"left"===v&&k.currentSprite!==k.sprites.run.left?(k.currentSprite=k.sprites.run.left,k.currnetCropWidth=k.sprites.run.cropWidth,k.width=k.sprites.run.width):E.left.pressed||"left"!==v||k.currentSprite===k.sprites.stand.left?E.right.pressed||"right"!==v||k.currentSprite===k.sprites.stand.right||(k.currentSprite=k.sprites.stand.right,k.currnetCropWidth=k.sprites.stand.cropWidth,k.width=k.sprites.stand.width):(k.currentSprite=k.sprites.stand.left,k.currnetCropWidth=k.sprites.stand.cropWidth,k.width=k.sprites.stand.width),//! Если выиграл
j>5*b.width+300-2&&console.log("You win"),//! Если проиграл
k.position.y>f.height&&O()}(),addEventListener("keydown",(function(t){switch(t.keyCode){case 65:console.log("left"),E.left.pressed=!0,v="left";break;case 83:console.log("down");break;case 68:console.log("right"),E.right.pressed=!0,v="right";break;case 87:console.log("up"),k.velocity.y-=8}})),addEventListener("keyup",(function(t){switch(t.keyCode){case 65:console.log("left"),E.left.pressed=!1;break;case 83:console.log("down");break;case 68:console.log("right"),E.right.pressed=!1;break;case 87:console.log("up")}}))}]);
//# sourceMappingURL=main.bundle.js.map